# python3基础知识

参考：京东读书：python3.5从零开始学 python基础教程（第三版）

[TOC]

## 基础知识

* 获取用户输入

```python
x = input('please input something')
```

* `type()`函数

`type()`函数返回输入的变量类型。

### 运算符和操作对象

* 算术运算符

| 运算符 | 描述                             | 实例            |
| ------ | -------------------------------- | --------------- |
| +      | 加：两个对象相加                 | a+b输出结果为15 |
| -      | 减：得到负数或一个数减去另一个数 | a-b输出结果为5  |
| * | 乘：两个数相乘或返回一个被重复若干次的字符串 | a*b输出结果为50
| / | 除：x除以y | a/b输出结果为2 |
| % | 取模：返回除法的余数 | b%a输出结果为0 |
| ** | 幂：返回x的y次幂 | a**b为10的5次方，输出结果为100000 |
| // | 取整除（地板除）：返回商的整数部分 | 9//2输出结果为4，9.0//2.0输出结果为4.0 |

* 比较运算符

| 运算符 | 描述                                                         | 实例            |
| ------ | ------------------------------------------------------------ | --------------- |
| ==     | 等于：比较对象是否相等                                       | (a==b)返回False |
| !=     | 不等于：比较两个对象是否不相等                               | (a!=b)返回True  |
| >      | 大于：返回x是否大于y                                         | (a>b)返回False  |
| <      | 小于：返回x是否小于y。所有比较运算符返回1表示真，返回0表示假，与特殊的变量True和False等价。注意大写的变量名 | (a<b)返回True   |
| >=     | 大于等于：返回x是否大于等于y                                 | (a>=b)返回False |
| <=     | 小于等于：返回x是否小于等于y                                 | (a<=b)返回True  |

* 赋值运算符

| 运算符 | 描述                     | 实例                          |
| ------ | ------------------------ | ----------------------------- |
| =      | 简单的赋值运算符         | c=a+b，将a+b的运算结果赋值给c |
| +=     | 加法赋值运算符           | c+=a，等效于c=c+a             |
| -=     | 减法赋值运算符           | c-=a，等效于c=c-a             |
| *=     | 乘法赋值运算符           | c*=a，等效于c=c*a             |
| /=     | 除法赋值运算符           | c/=a，等效于c=c/a             |
| %=     | 取模法赋值运算符         | c%=a，等效于c=c%a             |
| **=    | 幂赋值运算符             | c\*\*=a，等效于c=c**a         |
| //=    | 取整（地板）除赋值运算符 | c//=a，等效于c=c//a           |

* 位运算符

| 运算符 | 描述                                                         | 实例                                                         |
| ------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| &      | 按位与运算符：若参与运算的两个值的两个相应位都为1，则该位的结果为1：否则为0 | (a&b)输出结果12，二进制解释：0000 1100                       |
| \|     | 按位或运算符：只要对应的两个二进制位有一个为1，结果位就为1   | (a\|b)输出结果61，二进制解释：0011 1101                      |
| ^      | 按位异或运算符：当两个对应的二进制位相异时，结果为1          | (a^b)输出结果49，二进制解释：0011 00001                      |
| ~      | 按位取反运算符：对数据的每个二进制位取反，即把1变为0，把0变为1 | (~a)输出结果-61，二进制解释：1100 0011，在一个有符号二进制数的补码形式 |
| <<     | 左移动运算符：运算数的各个二进制位全部左移若干位，由<<右边的数指定移动的位数，高位丢弃，低位补0 | a<<2输出结果240，二进制解释：1111 0000                       |
| \>\>   | 右移动运算符：把>>左边运算数的各个二进制位全部右移若干位，>>右边的运算数指定移动的位数 | a>>2输出结果15，二进制解释：0000 1111                        |

* 逻辑运算符

| 运算符 | 逻辑表达式 | 描述                                                         | 实例                  |
| ------ | ---------- | ------------------------------------------------------------ | --------------------- |
| and    | x and y    | 布尔“与”：如果x为False，x and y就返回False；否则返回y的计算值 | (a and b)返回20       |
| or     | x or y     | 布尔“或”：如果x是非0，就返回x的值；否则返回y的计算值         | (a or b)返回10        |
| not    | not x      | 布尔“非”：如果x为True，就返回False；如果x为False，就返回True | not(a and b)返回False |

* 成员运算符

| 运算符 | 描述                                                | 实例   |
| ------ | --------------------------------------------------- | ------ |
| in     | 如果在指定的序列中找到值，就返回True；否则返回False | x in y |
| not in | 如果在指定的序列中没有找到值，就返回True；否则返回False | x not in y

* 身份运算符

| 运算符 | 描述                                       | 实例                                                |
| ------ | ------------------------------------------ | --------------------------------------------------- |
| is     | is判断两个标志符是否引用自一个对象         | x is y，如果id(x)等于id(y)，is返回结果1             |
| is not | is not用于判断两个标志符是否引用自不同对象 | x is not y，如果id(x)不等于id(y)，is not就返回结果1 |

* 运算符优先级

| 运算符                   | 描述                     |
| :----------------------- | ------------------------ |
| **                       | 指数（最高优先级）       |
| ~ + -                    | 按位翻转，一元加号和减号 |
| * / % //                 | 乘，除，取模和取整除     |
| + -                      | 加法，减法               |
| \>> <<                   | 右移左移运算符           |
| &                        | 位AND                    |
| ^ \|                     | 位运算符                 |
| <= < > >=                | 比较运算符               |
| <> == !=                 | 等于运算符               |
| = %= /= //= -= += *= **= | 赋值运算符               |
| is  is not               | 身份运算符               |
| in  not in               | 成员运算符               |
| not or and               | 逻辑运算符               |


## 列表和元组

### 通用序列操作

Python中所有序列都可以进行一些特定操作，包括索引（indexing）、分片（slicing）、序列相加（adding）、乘法（multiplying）、成员资格、长度、最小值和最大值。
* 索引

索引从**0**开始，不能越界；并且支持反向索引，从**-1**开始；用法：(#号代表解释器输出)

```python
string = 'hello'
string[1]
# 'e'
string[-1]
# 'o'
```

* 分片

使用分片可以对一定范围内的元素进行访问，分片通过冒号相隔的两个索引实现，结果包括前面一个索引，但是不包括后面一个索引，索引可以越界，不会产生异常。

```python
string = 'hello'
string[0:2]
# 'he'
string[0:5:2]#最后有一个参数为步长，默认为1
# 'hlo'
```

* 序列相加

使用加号可以进行序列的连接操作，但是只有类型（字符串，列表，元组）相同的序列才能通过加号进行序列连接操作。

```python
[1,2,3]+[4,5,6]
# [1,2,3,4,5,6]
```

* 乘法

用一个数字x乘以一个序列会生成一个新的序列，在新的序列中，原来的序列被重复x次。

```python
'hello' * 2
# 'hellohello'
```

* 成员资格`in`

`in`运算符可以检查一个值是否在序列中。

```python
string = 'hello'
'h' in string
# True
'w' in string
# False
```

* 长度函数`len()`

返回序列的长度。

```python
string = 'hello'
len(string)
# 5
```

* 最小值函数`min()`和最大值函数`max()`

返回序列的最小值。

```python
numbers = [1,2,3,4,5]
min(numbers)
# 1
max(numbers)
# 5
```

### 列表

列表用`[]`括起来，以`,`分隔，列表的内容是可变的，列表可以赋不同类型的值。

* 元素赋值

```python
a = [1,2,3,4,5]
a[1] = 10
a
# [1,10,3,4,5]
```

* 删除元素`del`语句

```python
a = list('hello')
del a[2]
```

* 分片赋值

分片赋值是列表的一个强大的特性。可以进行插入，赋值，删除等操作。

```python
a = list('hello')
a
# ['h', 'e', 'l', 'l', 'o']
a[5:] = 'world'
a
# ['h', 'e', 'l', 'l', 'o', 'w', 'o', 'r', 'l', 'd']
```

#### 列表方法

* append

`append()`方法在列表末尾添加新元素。

```python
list.append(obj)
```

* count

`count()`方法统计某个元素在列表中出现的次数。

```python
a = list('hello')
print(a.count('l'))
# 2
```

* extend

`extend()`方法用于在列表末尾一次性追加另一个**序列**中的全部值，直接修改原来列表，而非返回一个列表。

```python
a = list('hello')
a.extend('world')
a
# ['h', 'e', 'l', 'l', 'o', 'w', 'o', 'r', 'l', 'd']
```

* index

`index()`方法用于从列表中找出某个值第一个匹配项的索引位置。

```python
a = list('hello')
a.index('h')
# 0
```

* insert

`insert()`方法用于在某个索引位置插入某个元素

```python
a = list('ello')
a.insert(0, 'h')
a
# ['h', 'e', 'l', 'l', 'o']
```

* pop

`pop()`方法用于移除列表中的一个元素（默认最后一个元素），并且返回该元素的值。

```python
a = list('hello')
a.pop()
# 'o' 默认移除最后一个元素
a.pop(0)
# 'h' 也可移除指定索引位置的元素
```

* remove

`remove()`方法于移除列表中某个值的第一个匹配项。

```python
a = list('hello')
a.remove('h')
a
# ['e', 'l', 'l', 'o']
```

* reverse

`reverse()`方法用于反向列表中的元素。

```python
number = [1, 2, 3]
number.reverse()
print(number)
# [3, 2, 1]
```

如果需要对一个列表进行反向迭代，又希望保留原有副本，使用`n = number.reverse()`是没有用的，n的值会是None，因为这个方法没有返回任何值，而是在原有列表上直接修改。
这样势必要先将列表进行复制，再反向，使用`n = number`，然后再对其中一个进行反向，也是不可以的，这样会使两个列表都反向，因为这两个变量指向的是同一个列表。我们需要使用分片的方法进行复制，`n = number[:]`，这样才可以。
但是python给我们提供了*reversed*函数，这个函数将会返回一个迭代器对象，可以通过*list*函数将它转换成列表。

```python
number = [1, 2, 3]
n = list(reversed(number))
print (n)
# [3, 2, 1]
```

* sort

`sort()`方法用于对原列表进行排序，如果指定参数，就是用参数指定的比较方法进行排序。

```python
number = [3, 4, 2, 5, 1]
number.sort()
print (number)
# [1, 2, 3, 4, 5] sort方法改变了原来的列表，而不是返回一个列表副本
 
```

如*reverse*方法一样，*sort*方法也有一个同样功能的函数*sorted*函数，该函数返回一个排序的**列表**。

```python
number = [3, 4, 2, 5, 1]
n = sorted(number)
print (n)
```

如果希望元素能按特定方式进行排序（不是默认的按升序排序），就可以自定义比较方法。
*sort*放法有两个可选参数，即**key**和**reverse**，要使用它们就要通过名字指定，我们称之为关键字参数。

```python
a = ['study', 'python', 'is', 'happy']
a.sort(key=len) #按字符串由短到长排序
print(a)
# ['is', 'study', 'happy', 'python']
a.sort(key=len, reverse=True) #按字符串由长到短排序
print(a)
# ['python', 'study', 'happy', 'is']
```

* clear

`clear()`方法用于清空列表。

```python
a = list('hello')
a.clear()
print(a)
# []
```

* copy

`copy()`方法用于复制列表，类似于`a[:]`。

```python
a = list('hello')
b = a.copy()
print(b)
# ['h', 'e', 'l', 'l', 'o']
```

### 元组

Python的元组与列表类似，不同之处在于元组的元素不能修改（前面多次提到的字符串也是不能修改的）。创建元组的方法很简单：如果你使用逗号分隔了一些值，就会自动创建元组。创建包含一个值的元组，必须在括号中的元素后加一个**逗号**。

* *tuple*函数

*tuple*函数可以将一个序列转换为元组。

* 删除元组

元组中的元素值不允许删除，但是可以使用del语句删除整个元组。

```python
a = ('hello', 'world')
del a
```

## 字符串

### 字符串的基本操作

字符串是Python中最常用的数据类型。我们可以使用引号（'或"）创建字符串。创建字符串很简单，只要为变量分配一个值即可。

```python
a = 'hello'
```

### 字符串格式化

```python
print('hello,%s'%'world')
# hello,world
```

### 字符串方法

* `find()`方法

`find()`方法用于检测字符串中是否包含子字符串str。如果指定开始和结束范围，就检查是否包含在指定范围内。如果包含子字符串，就返回开始的索引值；否则返回**-1**。

```python
a = 'do it now'
a.find('do', 0, 3)
# 0
```

* `join()`方法

`join()`方法用于将序列中的元素以指定字符连接成一个新字符串。

```python
mark = '+'
num = ['1', '2', '3', '4', '5']
mark.join(num)
# 1+2+3+4+5
```

* `lower()`方法

`lower()`方法用于将字符串中所有大写字符转换为小写。

```python
a = 'DO IT NOW'
print(a.lower())
# 'do it now'
```

* `upper()`方法

`upper()`方法用于将字符串中的小写字母转换为大写字母。

```python
a = 'do it now'
print(a.upper())
# DO IT NOW
```

* `swapcase()`方法

`swapcase()`方法用于对字符串的大小写字母进行转换，将字符串中大写转换为小写，小写转换为大写。

```python
a = 'Do it now'
print(a.swapcase())
# dO IT NOW
```

* `replace()`方法

`replace()`方法把字符串中的旧字符串替换成新字符串，如果指定那个第3个参数max，替换次数就不超过max次（默认全部替换）。

```python
a = 'do it now, do right now'
print(a.replace('o', 'just', 2))
# djust it njustw, do right now
```

* `split()`方法

`split()`方法通过指定分隔符对字符串进行切片，如果参数*num*有指定值，就只分隔*num*个子字符串（默认全部分隔）。这是一个非常重要的字符串方法。是*join*的逆方法，用来将字符串分割成序列。

```python
a = 'do it now'
print(a.split(' ', 1))
# ['do', 'it now']
```

* `strip()`方法

`strip()`方法用于移除字符串头尾指定的字符（默认为空格）。返回结果为移除字符串头尾指定的字符生成的新字符串。

```python
a = '----do---it---now----'
print(a.strip('-'))
# do---it---now
```

* `translate()`方法

`translate()`方法根据参数table给出的表转换字符串的字符，将要过滤掉的字符放到del参数中。返回结果为翻译后的字符串。

```python
intab = 'abcde'
outtab = '12345'
trantab = str.maketrans(intab, outtab)
st = 'just do it'
print(st.translate(trantab, 'it'))
# just 4o
```

* `center()`方法

`center()`方法通过在两边添加填充字符（默认为空格）让字符串居中。

```python
print('hello world'.center(13, '*')) # 其中的数字参数为填充后字符串总长度,符号参数为填充符号（默认为空格）
# '*hello world*'
```

## 字典

本章将介绍一种通过名字引用值的数据结构，这种结构类型称为映射（mapping）。字典是Python中唯一内建的映射类型，字典指定值并没有特殊顺序，都存储在一个特殊的键（Key）里，键可以是数字、字符串或元组。

### 创建字典

字典由多个键及其对应的值构成的对组成（把键／值对称为项）。字典的每个键／值（key/value）对用冒号（:）分割，每个项之间用逗号（,）分割，整个字典包括在花括号({})中。空字典（不包括任何项）由两个大括号组成，如{}。

键必须是唯一的，但值不必。值可以取任何数据类型，键必须是不可变的，如字符串、数字或元组。

```python
dict1 = {'abc':456, 'def':123}
```

* `dict()`函数

可以用`dict()`函数，通过其他映射或键/值序列对建立字典。

```python
student = [('name','小萌'), ('number','1001')]
detail = dict(student)
print(detail)
# {'name':'小萌', 'number':'1001'}
```

### 字典的基本操作

* 字典键的特性

1. 不允许同一个键出现两次。创建时如果同一个键被赋值两次，后面的值会被记住。

2. 键必须不可变，可以用数字、字符串或元组充当，不能用列表。

* 修改字典

通过赋值的方式更新字典中已存在的键的值，如果赋值的键不存在，则在字典中增加这个键/值对。

```python
student={'小萌':'1001','小智':'1002','小强':'1003'}
student['小强']='1005' #更新小强的学号
student['小明']='1006' #增加小明的学号
```

* 删除字典元素

```python
student={'小强': '1005', '小萌': '1001', '小智': '1002', '小张': '1006'}
del student['小张'] #删除键“小张”
```

* 将字符串格式设置功能用于字典

前面介绍过，可使用字符串格式设置功能来设置值的格式，这些值是作为命名或非命名参数提供给方法format的。在有些情况下，通过在字典中存储一系列命名的值，可让格式设置更容易些。例如，可在字典中包含各种信息，这样只需在格式字符串中提取所需的信息即可。为此，必须使用format_map来指出你将通过一个映射来提供所需的信息。

```python
phonebook = {'Beth'：'9102'，'Alice'：'2341'，'Cecil'：'3258'}
"Cecil's phone number is {Cecil}.".format_map（phonebook）
"Cecil's phone number is 3258."
```

### 字典函数

* `len()`函数

`len()`函数用于计算字典元素的个数。

### 字典方法

* `clear()`方法

`clear()`方法用于删除字典内的所有项。

* `copy()`

`copy()`方法返回一个新字典，其包含的键-值对与原来的字典相同（这个方法执行的是**浅复制**，因为值本身是原件，而非副本）。

* `fromkeys()`方法

`fromkeys()`方法用于创建一个新字典，以序列中的元素做字典的键，value为字典所有键对应的初始值（默认值为None）。

```python
seq = ('name', 'age', 'sex')
info = dict.fromkeys(seq, 10)
print(info)
# {'name': 10, 'sex': 10, 'age': 10}
```

* `get()`方法

`get()`方法返回指定键的值，如果值不在字典中，就返回默认值（default = None）。其他方法试图访问字典中不存在的项时会出错，而使用get方法就不会。

* `setdefault()`方法

`setdefault()`方法和`get()`方法类似，用于获得与给定键相关联的值。如果键不存在于字典中，就会添加键并将值设为默认值(default=None)。

* key in dict方法

Python字典in操作符用于判断键是否存在于字典中，如果键在字典dict中就返回true，否则返回false。

* `items()`方法

`items()`方法以列表返回可遍历的（键,值）元组数组。

* `keys()`方法

`keys()`方法以列表返回一个字典所有键。

* `update()`方法

`update()`方法用于把字典dict2里的键/值对更新到dict里。

```python
dict.update(dict2)
```

* `values()`方法

`values()`方法以列表形式返回字典中所有值。与返回键的列表不同，返回的列表中可以包含重复的元素。


## 条件、循环和其他语句

### if语句

```python
if a > b:
    pass
elif a = b:
    pass
else:
    pass
```

### 循环

* while循环

```python
while n <= 100:
    pass
#在while循环中使用else子句，在while条件语句为false时，执行else的语句块
else：
    pass
```


* for循环

```python
for x in range(10):
    print(x)
for key, value in dict.items():
    pass
#zip函数用来进行并行迭代，可以把两个序列合并在一起，返回一个元组的列表，并且可以应付不等长的序列，当短序列用完时就会停止
for num1, num2 in zip(range(3), range(100)):
    pass
```

## 函数

### 定义函数

```python
def name(arg1, arg2,... argN):
    pass
```

### 函数的参数

函数的参数类型：
1. 必须参数
2. 默认参数
3. 可变参数
4. 关键字参数

## 面向对象编程


## 异常

## 正则表达式

### 特殊符号和字符

最常见的特殊符号和字符，即所谓的元字符，正是它给予正则表达式强大的功能和灵活性。

|  表示法   |                          描述                          |     正则表达式示例      |
| :-------: | :----------------------------------------------------: | :---------------------: |
|   符号    |                                                        |                         |
|  literal  |             匹配文本字符串的字面值literal              |           foo           |
| re1\|re2  |                 匹配正则表达式re1或re2                 |        foo\|bar         |
|     .     |               匹配任何字符（除了\n之外）               |           b.b           |
|     ^     |                   匹配字符串起始部分                   |          ^Dear          |
|          |                   匹配字符串终止部分                   |        /bir/*sh$        |
|     *     |          匹配0次或者多次前面出现的正则表达式           |      [A-Za-z0-9]*       |
|     +     |          匹配1次或者多次前面出现的正则表达式           |      [a-z]+\\.com       |
|     ?     |           匹配0次或者1次前面出现的正则表达式           |          goo?           |
|    {N}    |              匹配N次前面出现的正则表达式               |        [0-9]{3}         |
|   {M,N}   |             匹配M~N次前面出现的正则表达式              |        [0-9]{3}         |
|   [...]   |              匹配来自字符集的任意单一字符              |         [aeiou]         |
| [..x-y..] |              匹配x~y范围中的任意单一字符               |     [0-9],[A-Za-z]      |
|  [^...]   | 不匹配此字符集中出现的任何一个字符，包括某一范围的字符 |  [^aeiou],[^A-Za-z0-9]  |
|   (...)   |          匹配封闭的正则表达式，然后另存为子组          | ([0-9]{3})?,f(oo\|u)bar |
| 特殊字符  |                                                        |                         |
|    \d     |     匹配任何十进制数字，与[0-9]一致（\D与\d相反）      |      data\\d+.txt       |
|    \w     | 匹配任何字母数字字符，与[A-Za-z0-9]相同（\W与之相反）  |       [A-Za-z]\w+       |
|    \s     |            匹配任何空格字符，（\S与之相反）            |         of\sthe         |
|    \b     |             匹配任何单词边界（\B与之相反）             |         \bThe\b         |

## 文件操作

### 打开文件

* open函数

open函数用于打开文件，返回一个文件对象。

* 文件打开模式

| 模式 |                             描述                             |
| :--: | :----------------------------------------------------------: |
|  r   | 以只读方式打开文件。文件的指针将会放在文件的开头，这是默认模式 |
|  rb  | 以二进制格式打开一个文件用于只读。文件指针将会放在文件的开头 |
|  r+  |       打开一个文件用于读写。文件指针将会放在文件的开头       |
| rb+  | 以二进制格式打开一个文件用于读写。文件指针将会放在文件的开头 |
|  w   | 打开一个文件只用于写入。如果该文件已存在，就将其覆盖；如果该文件不存在，就创建新文件 |
|  wb  | 以二进制格式打开一个文件只用于写入。如果该文件已存在，就将其覆盖；如果该文件不存在，就创建新文件 |
|  w+  | 打开一个文件用于读写。如果该文件已存在，就将其覆盖；如果该文件不存在，就创建新文件 |
| wb+  | 以二进制格式打开一个文件用于读写。如果该文件已存在，就将其覆盖；如果该文件不存在，就创建新文件 |
|  a   | 打开一个文件用于追加。如果该文件已存在，文件指针就会放在文件的结尾。也就是说，新内容将会被写入已有内容之后。如果该文件不存在，就创建新文件进行写入 |
|  ab  | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针就会放在文件的结尾。也就是说，新内容将会被写入已有内容之后。如果该文件不存在，就创建新文件进行写入 |
|  a+  | 打开一个文件用于读写。如果该文件已存在，文件指针就会放在文件的结尾。文件打开时是追加模式。如果该文件不存在，就创建新文件用于读写 |
| ab+  | 以二进制格式打开一个文件用于追加。如果该文件已存在，文件指针将会放在文件结尾。如果该文件不存在，创建新文件就用于读写 |

### 文件对象的方法

* `read()`方法

`read()`方法从一个文件对象中读取字符串。*count*参数是从文件对象中读取的字节数。如果没有传入count，就会尝试尽可能多的读取内容，很可能一直读取到文件末尾。

```python
file.read([count])
```

* `readline()`方法

`readline()`方法用于从文件中读取单独一行。

* `readlines()`方法

`readlines()`方法用于读取文件中的多行，如果不指定count，则读取全部行，以列表形式返回。

* `write()`方法

`write()`方法向一个文件写入字符串。不会再字符串结尾添加换行符。该方法返回写入文件的字符串的长度。

```python
file.write(string)
```

* `writelines()`方法

`writelines()`方法，传给它一个字符串列表，它会把所有字符串写入文件。

* `close()`方法

`close()`方法，文件使用完毕之后，需要关闭。

### with语句

使用with语句打开文件，可以防止我们忘记关闭文件。代码也会更加简洁。

```python
with open(path, 'w') as f:
    pass
```

### os模块中的文件操作

* os.rename()为文件重命名

```python
os.rename(current_file_name, new_file_name)
```

* os.remove()删除文件

```python
os.remove(file_name)
```

## 多线程